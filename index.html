<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Indicatoren Op Regionaal Niveau Corrigeren Voor Grenswijzigingen • grenswijzigen</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Indicatoren Op Regionaal Niveau Corrigeren Voor Grenswijzigingen">
<meta name="description" content="Deze repository bevat de code voor grenswijzigingen.">
<meta property="og:description" content="Deze repository bevat de code voor grenswijzigingen.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">grenswijzigen</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/grenswijzigen.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="grenswijzigingen">Grenswijzigingen<a class="anchor" aria-label="anchor" href="#grenswijzigingen"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>Deze repository bevat de code voor grenswijzigingen. Dit is een <em>fork</em> en update van <a href="https://github.com/VNG-Realisatie/grenswijzigen" class="external-link uri">https://github.com/VNG-Realisatie/grenswijzigen</a>.</p>
<div class="section level2">
<h2 id="introductie">Introductie<a class="anchor" aria-label="anchor" href="#introductie"></a>
</h2>
<p>Het grondgebied van Nederland kan op diverse manieren worden opgedeeld. De opdeling waar het in deze repository over gaat is de opsplitsing in gemeenten, wijken en buurten. Daarbij geldt dat buurten optellen tot wijken en wijken optellen tot gemeenten.</p>
<p>Deze indeling ligt niet vast. Het aantal gemeenten neemt de laatste jaren af door fusies. Een grotere gemeente kan taken die worden toegewezen aan gemeenten gemakkelijker oppakken. Het aantal wijken neemt geleidelijk aan toe. Een gemeente kan zelf bepalen hoe zij hun grondgebied willen opdelen in wijken en buurten. Wellicht doordat het aantal gemeenten af neemt, is er behoefte een gemeente op te delen in meer wijken.</p>
<p><img src="reference/figures/README-trends.png"></p>
<p>Door deze ontwikkelingen wijzigen de grenzen van gemeenten en wijken regelmatig . Dat heeft consequenties als men de huidige wijkkenmerken wil vergelijken met het verleden. Immers, de huidige wijk bestond mogelijk nog niet in voorgaande jaren. Daarmee is het lastig om trends in de ontwikkelingen in wijkkenmerken scherp te ontwaren. Bij wijkkenmerken kan men bijvoorbeeld denken aan het aandeel 65-plussers, de gemiddelde huishoudgrootte of de gemiddelde huizenprijs in een wijk. Zie voorbeeld hieronder waarbij de gemeente Haaren van 2020 naar 2021 opgaat in de vier gemeenten Boxtel, Oisterwijk, Tilburg, en Vught.</p>
<p><img src="reference/figures/README-example.png"></p>
<p>Het CBS rapporteert de wijzigingen in gemeentegrenzen en hoe wijkkenmerken over de jaren heen vergeleken kunnen worden. Voor de wijkgrenzen is er geen jaarlijkse publicatie over hoe wijkkenmerken over de jaren heen vergeleken kunnen worden. Het CBS geeft enkel aan of de cijfers vergeleken mogen worden met het jaar daarvoor. Als de cijfers niet vergelijkbaar zijn met het vorige jaar wordt niet aangegeven hoe deze getransformeerd moeten worden.</p>
<p>In principe kan het CBS of de gemeente op basis van zogenaamde microdata exact uitrekenen wat de wijkkenmerken van vorige jaren zijn voor de huidige wijkgrenzen. Deze microdata bestaat uit kenmerken op persoons- of huishoudensniveau. Voor het rekenen met microdata moeten de privacy regels goed gewaarborgd worden.</p>
<p>Indien er geen beschikking is over microdata, of als men niet met privacy gevoelige data wil of kan rekenen, kunnen er toch schattingen worden gemaakt van de wijkkenmerken van vorige jaren met de huidige wijkgrenzen. Deze repository bevat R-script waarmee dergelijke schattingen gemaakt kunnen worden.</p>
<p>Zie deze link (voor het laatst bijgewerkt in 2022) voor een dashboard die grenswijzigingen inzichtelijk maakt <a href="https://datamonitoringvng.shinyapps.io/grenswijzigingen/" class="external-link uri">https://datamonitoringvng.shinyapps.io/grenswijzigingen/</a></p>
</div>
<div class="section level2">
<h2 id="modellen-voor-grenswijzigen">Modellen voor grenswijzigen<a class="anchor" aria-label="anchor" href="#modellen-voor-grenswijzigen"></a>
</h2>
<p>Alle modellen zijn gebaseerd op het volgen van adressen door de tijd heen. Hierdoor kan worden achterhaalt bij welke wijk een adres hoort op in elk jaar. Vervolgens zijn er verschillende manieren om deze informatie te benutten. In deze repository zijn er drie modellen geïmplementeerd voor het uitvoeren van grenswijzigingen.</p>
<ul>
<li><p>Model.0 gaat uit van een uniforme verdeling van wijkkenmerken over de wijk heen. Dat wil zeggen dat wordt aangenomen dat kenmerken, bijvoorbeeld het aantal 65-plussers, gelijkelijk verdeeld zijn over de wijk. Bij het delen van de wijk in kleinere stukken kunnen deze kenmerken dan evenredig met het aantal adressen in deze stukken worden toegekend. In Model.0 zijn adressen gedefinieerd als postcode + huisnummer. Huisnummertoevoegingen en gebruiksfunctie van adressen worden niet meegenomen. Model.0 is daarmee een heel toegankelijk model dat een redelijk goede grenswijziging uitvoerd, maar dat faalt in geval van wijken met veel huisnummertoevoegingen (bijvoorbeeld hoogbouw of flats) en wijken met veel adressen zonder woonfunctie (bijvoorbeeld winkels, scholen en fabrieken).</p></li>
<li><p>Model.1 werkt gelijk aan Model.0 maar neemt daarentegen wel de huisnummertoevoeging en gebruiksfunctie van het adres mee. In Model.1 worden alleen adressen met een woonfunctie beschouwt. Daarmee presteert Model.1 aanzienlijk beter dan Model.0 voor wijken met veel huisnummertoevoegingen en andere gebruiksfuncties dan wonen. Model.1 gaat echter nog wel altijd uit van een uniforme verdeling van de wijkkenmerken over de wijk heen. Daarnaast wordt er een VNG api gebruikt om de huisnummertoevoegingen en gebruiksfunctie te achterhalen Dat kost het tamelijk veel tijd om uit te voeren voor alle adressen in Nederland. Daarom zijn ook vooraf berekende omzetmatrices beschikbaar gesteld in deze repository.</p></li>
<li><p>Model.2 neemt een andere benadering. Hier worden adressen opgedeeld in blokken gedefinieerd door de overlappingen tussen wijken in het ene jaar en de wijken in het volgende jaar. Voor elk blok wordt een variabele gedefinieerd die het gemiddelde van een wijkkenmerk in dat blok weergeeft. Voor deze variabelen wordt een stelsel formules opgesteld zodat de sommen van de adressen maal de gemiddelden gelijk zijn aan de wijkkenmerken zoals gepubliceerd door het CBS. Daarnaast wordt aangenomen dat deze gemiddelden van jaar tot jaar nauwelijks wijzigen. Dat lijkt een redelijke aanname: bijvoorbeeld het gemiddelde aantal 65-plussers per adres zal van jaar tot jaar ongeveer gelijk zijn. Dit stelsel vergelijkingen wordt opgelost wat tot grensgewijzigde data leidt. In dit model wordt eveneens uitgegaan van adressen met huisnummertoevoegingen en woonfunctie.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="installatie">Installatie<a class="anchor" aria-label="anchor" href="#installatie"></a>
</h2>
<div class="section level3">
<h3 id="pakket-als-bibliotheek">Pakket als bibliotheek<a class="anchor" aria-label="anchor" href="#pakket-als-bibliotheek"></a>
</h3>
<p>Het pakket van ‘grenswijzigingen’ kan geïnstalleerd worden vanuit GitHub als:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install the development version from GitHub</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"reidhin/grenswijzigen"</span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="opzetten-project">Opzetten project<a class="anchor" aria-label="anchor" href="#opzetten-project"></a>
</h3>
<p>Indien gewenst kan de gehele code ook vanuit GitHub gecloned worden.</p>
<p>De hoofdfunctie voor het uitvoeren van de code is de functie <code>wrapper_vertaal_naar_peiljaar</code> in het bestand grenswijzigingen.R. Indicatoren die bestaan uit aantallen (bijvoorbeeld aantal inwoners in de wijk of aantal 65-plussers in de wijk) worden intern op een andere manier behandeld dan indicatoren die bestaan uit percentages of aandelen (bijvoorbeeld gemiddelde huishoudgrootte of aandeel arbeidsongeschikten per wijk). De functie <code>wrapper_vertaal_naar_peiljaar</code> probeert op basis van kolomnamen zelf in te schatten of het om aantallen of aandelen gaat.</p>
</div>
</div>
<div class="section level2">
<h2 id="voorbeeld">Voorbeeld<a class="anchor" aria-label="anchor" href="#voorbeeld"></a>
</h2>
<p>Hieronder staat een basis voorbeeld hoe de code gebruikt kan worden. Het is noodzakelijk dat het data-frame naast de indicatoren ook de kolommen ‘jaar’ en ‘wijkcode’ bevat. De wijkcode bevat de <a href="https://www.cbs.nl/nl-nl/dossier/nederland-regionaal/gemeente/gemeenten-en-regionale-indelingen/codering-gebieden" class="external-link">gwb-code</a> van de wijk. Het ‘jaar’ refereert aan de wijkindeling die voor de indicatoren gebruikt is.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://reidhin.github.io/grenswijzigen/">grenswijzigen</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edwindj/cbsodataR" class="external-link">cbsodataR</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: cbsodataR</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: dplyr</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span></span>
<span><span class="va">kolommen_te_laden</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"WijkenEnBuurten"</span>, <span class="st">"Gemeentenaam_1"</span>,</span>
<span>  <span class="st">"AantalInwoners_5"</span>, <span class="st">"k_65JaarOfOuder_12"</span>,</span>
<span>  <span class="st">"GemiddeldeHuishoudensgrootte_32"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># laad de kerncijfers per wijk voor 2017 en 2018</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/cbsodataR/man/cbs_get_data.html" class="external-link">cbs_get_data</a></span><span class="op">(</span></span>
<span>    id<span class="op">=</span><span class="st">"83765NED"</span>,</span>
<span>    WijkenEnBuurten <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/cbsodataR/man/has_substring.html" class="external-link">has_substring</a></span><span class="op">(</span><span class="st">"WK"</span><span class="op">)</span>,</span>
<span>    select <span class="op">=</span> <span class="va">kolommen_te_laden</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>jaar<span class="op">=</span><span class="fl">2017</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/cbsodataR/man/cbs_get_data.html" class="external-link">cbs_get_data</a></span><span class="op">(</span></span>
<span>    id<span class="op">=</span><span class="st">"84286NED"</span>,</span>
<span>    WijkenEnBuurten <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/cbsodataR/man/has_substring.html" class="external-link">has_substring</a></span><span class="op">(</span><span class="st">"WK"</span><span class="op">)</span>,</span>
<span>    select <span class="op">=</span> <span class="va">kolommen_te_laden</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>jaar<span class="op">=</span><span class="fl">2018</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>  wijkcode<span class="op">=</span><span class="va">WijkenEnBuurten</span>,</span>
<span>  gemeentenaam<span class="op">=</span><span class="va">Gemeentenaam_1</span>,</span>
<span>  aantal_inwoners<span class="op">=</span><span class="va">AantalInwoners_5</span>,</span>
<span>  aantal_65plus<span class="op">=</span><span class="va">k_65JaarOfOuder_12</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># laat de wijken in Wageningen zien</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Wageningen"</span>, <span class="va">gemeentenaam</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 14 × 6</span></span>
<span><span class="co">#&gt;    wijkcode    gemeentenaam aantal_inwoners aantal_65plus GemiddeldeHuishouden…¹</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;                  &lt;int&gt;         &lt;int&gt;                  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 "WK028900 … "Wageningen…           33885          5125                    1.7</span></span>
<span><span class="co">#&gt;  2 "WK028901 … "Wageningen…            4570           800                    1.9</span></span>
<span><span class="co">#&gt;  3 "WK028901 … "Wageningen…            4725           440                    2.3</span></span>
<span><span class="co">#&gt;  4 "WK028902 … "Wageningen…            2480             5                    1.1</span></span>
<span><span class="co">#&gt;  5 "WK028903 … "Wageningen…            2750           540                    2.2</span></span>
<span><span class="co">#&gt;  6 "WK028904 … "Wageningen…            2085           360                    2.2</span></span>
<span><span class="co">#&gt;  7 "WK028905 … "Wageningen…            3175            30                    1.4</span></span>
<span><span class="co">#&gt;  8 "WK028906 … "Wageningen…            6895          1435                    1.7</span></span>
<span><span class="co">#&gt;  9 "WK028907 … "Wageningen…            5190           750                    1.8</span></span>
<span><span class="co">#&gt; 10 "WK028908 … "Wageningen…            2505           560                    1.6</span></span>
<span><span class="co">#&gt; 11 "WK028909 … "Wageningen…            3530           505                    1.4</span></span>
<span><span class="co">#&gt; 12 "WK028910 … "Wageningen…            2525           710                    1.9</span></span>
<span><span class="co">#&gt; 13 "WK028911 … "Wageningen…            1175           405                    2.3</span></span>
<span><span class="co">#&gt; 14 "WK028912 … "Wageningen…            1370           385                    2.1</span></span>
<span><span class="co">#&gt; # ℹ abbreviated name: ¹​GemiddeldeHuishoudensgrootte_32</span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: jaar &lt;dbl&gt;</span></span>
<span></span>
<span><span class="co"># Omzetten van de data van 2017 naar 2018</span></span>
<span><span class="va">df_omgezet</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wrapper_vertaal_naar_peiljaar.html">wrapper_vertaal_naar_peiljaar</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>,</span>
<span>  peiljaar <span class="op">=</span> <span class="fl">2018</span>,</span>
<span>  model<span class="op">=</span><span class="st">"model.2"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; ----------------------------</span></span>
<span><span class="co">#&gt; De volgende kolommen worden niet meegenomen in de grensomzetting</span></span>
<span><span class="co">#&gt; wijkcode</span></span>
<span><span class="co">#&gt; gemeentenaam</span></span>
<span><span class="co">#&gt; jaar</span></span>
<span><span class="co">#&gt; gwb_code</span></span>
<span><span class="co">#&gt; ----------------------------</span></span>
<span><span class="co">#&gt; [1] "Aantal rijen omgezette data-frame: 3085"</span></span>
<span><span class="co">#&gt; [1] "Aantal rijen omgezette data-frame: 3085"</span></span>
<span></span>
<span></span>
<span><span class="co"># laat de wijken in Wageningen zien</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">df_omgezet</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Wageningen"</span>, <span class="va">gemeentenaam</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    gwb_code jaar aantal_inwoners aantal_65plus GemiddeldeHuishoudensgrootte_32</span></span>
<span><span class="co">#&gt; 1    028901 2018        4725.000    440.000000                        2.300000</span></span>
<span><span class="co">#&gt; 2    028901 2017        4729.277    422.893689                        2.254756</span></span>
<span><span class="co">#&gt; 3    028902 2017        2480.632      2.473616                        1.086976</span></span>
<span><span class="co">#&gt; 4    028902 2018        2480.000      5.000000                        1.100000</span></span>
<span><span class="co">#&gt; 5    028903 2018        2750.000    540.000000                        2.200000</span></span>
<span><span class="co">#&gt; 6    028903 2017        2751.938    532.249797                        2.167788</span></span>
<span><span class="co">#&gt; 7    028904 2018        2085.000    360.000000                        2.200000</span></span>
<span><span class="co">#&gt; 8    028904 2017        2086.185    355.258833                        2.174806</span></span>
<span><span class="co">#&gt; 9    028905 2018        3175.000     30.000000                        1.400000</span></span>
<span><span class="co">#&gt; 10   028905 2017        3177.715     19.140689                        1.371744</span></span>
<span><span class="co">#&gt; 11   028906 2018        6895.000   1435.000000                        1.700000</span></span>
<span><span class="co">#&gt; 12   028906 2017        6916.329   1349.684404                        1.593126</span></span>
<span><span class="co">#&gt; 13   028907 2018        5190.000    750.000000                        1.800000</span></span>
<span><span class="co">#&gt; 14   028907 2017        5198.683    715.267173                        1.731809</span></span>
<span><span class="co">#&gt; 15   028908 2018        2505.000    560.000000                        1.600000</span></span>
<span><span class="co">#&gt; 16   028908 2017        2507.733    549.068773                        1.562280</span></span>
<span><span class="co">#&gt; 17   028909 2018        3530.000    505.000000                        1.400000</span></span>
<span><span class="co">#&gt; 18   028909 2017        3533.583    490.668989                        1.356198</span></span>
<span><span class="co">#&gt; 19   028910 2018        2525.000    710.000000                        1.900000</span></span>
<span><span class="co">#&gt; 20   028910 2017        2527.318    700.728511                        1.864797</span></span>
<span><span class="co">#&gt; 21   028911 2017        1175.408    403.367688                        2.285217</span></span>
<span><span class="co">#&gt; 22   028911 2018        1175.000    405.000000                        2.300000</span></span>
<span><span class="co">#&gt; 23   028912 2018        1370.000    385.000000                        2.100000</span></span>
<span><span class="co">#&gt; 24   028912 2017        1370.201    384.197838                        2.091296</span></span>
<span><span class="co">#&gt;    berekend                             gemeentenaam   wijkcode</span></span>
<span><span class="co">#&gt; 1     FALSE Wageningen                               WK028901  </span></span>
<span><span class="co">#&gt; 2      TRUE Wageningen                               WK028901  </span></span>
<span><span class="co">#&gt; 3      TRUE Wageningen                               WK028902  </span></span>
<span><span class="co">#&gt; 4     FALSE Wageningen                               WK028902  </span></span>
<span><span class="co">#&gt; 5     FALSE Wageningen                               WK028903  </span></span>
<span><span class="co">#&gt; 6      TRUE Wageningen                               WK028903  </span></span>
<span><span class="co">#&gt; 7     FALSE Wageningen                               WK028904  </span></span>
<span><span class="co">#&gt; 8      TRUE Wageningen                               WK028904  </span></span>
<span><span class="co">#&gt; 9     FALSE Wageningen                               WK028905  </span></span>
<span><span class="co">#&gt; 10     TRUE Wageningen                               WK028905  </span></span>
<span><span class="co">#&gt; 11    FALSE Wageningen                               WK028906  </span></span>
<span><span class="co">#&gt; 12     TRUE Wageningen                               WK028906  </span></span>
<span><span class="co">#&gt; 13    FALSE Wageningen                               WK028907  </span></span>
<span><span class="co">#&gt; 14     TRUE Wageningen                               WK028907  </span></span>
<span><span class="co">#&gt; 15    FALSE Wageningen                               WK028908  </span></span>
<span><span class="co">#&gt; 16     TRUE Wageningen                               WK028908  </span></span>
<span><span class="co">#&gt; 17    FALSE Wageningen                               WK028909  </span></span>
<span><span class="co">#&gt; 18     TRUE Wageningen                               WK028909  </span></span>
<span><span class="co">#&gt; 19    FALSE Wageningen                               WK028910  </span></span>
<span><span class="co">#&gt; 20     TRUE Wageningen                               WK028910  </span></span>
<span><span class="co">#&gt; 21     TRUE Wageningen                               WK028911  </span></span>
<span><span class="co">#&gt; 22    FALSE Wageningen                               WK028911  </span></span>
<span><span class="co">#&gt; 23    FALSE Wageningen                               WK028912  </span></span>
<span><span class="co">#&gt; 24     TRUE Wageningen                               WK028912</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="modellen-voor-omzetten-postcode-naar-regio">Modellen voor omzetten postcode naar regio<a class="anchor" aria-label="anchor" href="#modellen-voor-omzetten-postcode-naar-regio"></a>
</h2>
<p>In sommige gevallen is data op postcode niveau beschikbaar, vaak betreft dat data die op 4-cijferige postcode gepubliceerd is. Deze data kan worden omgezet naar regionaal niveau, dat wil zeggen, naar data op wijk- of gemeenteniveau. Voor deze omzetting kan dezelfde techniek worden gebruikt als voor de grenswijzigingen zoals hierboven beschreven onder ‘Model.0’.</p>
<p>Voor het omzetten van data op postcode niveau naar regionaalniveau is ook een functie opgenomen in dit pakket. Zie voor een voorbeeld hoe deze functie te gebruiken hieronder.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Voor het omzetten van data op postcode niveau naar data op regionaalniveau</span></span>
<span><span class="co"># kan de volgende procedure gebruikt worden</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://reidhin.github.io/grenswijzigen/">grenswijzigen</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edwindj/cbsodataR" class="external-link">cbsodataR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># laad de bevolkingsgrootte per 4-cijferige postcode</span></span>
<span><span class="va">df.postcode</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/cbsodataR/man/cbs_get_data.html" class="external-link">cbs_get_data</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="st">"83502NED"</span>,</span>
<span>  Geslacht <span class="op">=</span> <span class="st">"T001038"</span>,</span>
<span>  Leeftijd <span class="op">=</span> <span class="st">"10000"</span>,</span>
<span>  Postcode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/cbsodataR/man/has_substring.html" class="external-link">has_substring</a></span><span class="op">(</span><span class="st">"PC"</span><span class="op">)</span>,</span>
<span>  Perioden <span class="op">=</span> <span class="st">"2020JJ00"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Geslacht"</span>, <span class="st">"Leeftijd"</span>, <span class="st">"Postcode"</span>, <span class="st">"Perioden"</span>, <span class="st">"Bevolking_1"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>  Postcode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"\\D"</span>, <span class="st">""</span>, <span class="va">Postcode</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="st">"Postcode"</span>, <span class="st">"Bevolking_1"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># zet om naar wijk</span></span>
<span><span class="va">df.vertaald</span> <span class="op">=</span> <span class="fu"><a href="reference/vertaal_postcode_naar_regio_op_peiljaar.html">vertaal_postcode_naar_regio_op_peiljaar</a></span><span class="op">(</span></span>
<span>  <span class="va">df.postcode</span>,</span>
<span>  oorspronkelijk_jaar <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>  peiljaar <span class="op">=</span> <span class="fl">2021</span>,</span>
<span>  type_kolommen <span class="op">=</span> <span class="st">"aantal"</span>,</span>
<span>  regionaalniveau <span class="op">=</span> <span class="st">"wijk"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Aantal rijen omgezette data-frame: 3243"</span></span>
<span></span>
<span><span class="co"># Hieronder staat de omgezette postcode data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df.vertaald</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   gwb_code Bevolking_1 jaar</span></span>
<span><span class="co">#&gt; 1   001400   23400.192 2020</span></span>
<span><span class="co">#&gt; 2   001401   19864.358 2020</span></span>
<span><span class="co">#&gt; 3   001402   14374.962 2020</span></span>
<span><span class="co">#&gt; 4   001403   18545.000 2020</span></span>
<span><span class="co">#&gt; 5   001404   11841.837 2020</span></span>
<span><span class="co">#&gt; 6   001405    3996.121 2020</span></span>
<span></span>
<span><span class="co"># Voor het vergelijken met data op wijkniveau</span></span>
<span><span class="co"># laad de bevolkingsgrootte uit de KWB-data per wijk</span></span>
<span><span class="va">df.wijk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/cbsodataR/man/cbs_get_data.html" class="external-link">cbs_get_data</a></span><span class="op">(</span></span>
<span>  id<span class="op">=</span><span class="st">"85039NED"</span>,</span>
<span>  WijkenEnBuurten <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/cbsodataR/man/has_substring.html" class="external-link">has_substring</a></span><span class="op">(</span><span class="st">"WK"</span><span class="op">)</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"WijkenEnBuurten"</span>, <span class="st">"AantalInwoners_5"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Vergelijk deze output met de schatting hierboven.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df.wijk</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">WijkenEnBuurten</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 2</span></span>
<span><span class="co">#&gt;   WijkenEnBuurten AantalInwoners_5</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                      &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 "WK001400  "               22735</span></span>
<span><span class="co">#&gt; 2 "WK001401  "               19695</span></span>
<span><span class="co">#&gt; 3 "WK001402  "               14055</span></span>
<span><span class="co">#&gt; 4 "WK001403  "               18405</span></span>
<span><span class="co">#&gt; 5 "WK001404  "               12355</span></span>
<span><span class="co">#&gt; 6 "WK001405  "                3290</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="bekende-fouten">Bekende fouten<a class="anchor" aria-label="anchor" href="#bekende-fouten"></a>
</h2>
<ul>
<li>Het adres met postcode 8754HA en huisnummer 23 lijkt in 2021 ten onrechte aan de gemeente Harderwijk te zijn toegewezen in de bronbestanden van het CBS.</li>
</ul>
</div>
<div class="section level2">
<h2 id="licentie">Licentie<a class="anchor" aria-label="anchor" href="#licentie"></a>
</h2>
<p><a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.nl" class="external-link"><img alt="Creative Commons-Licentie" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>Dit werk valt onder een <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.nl" class="external-link">Creative Commons Naamsvermelding-NietCommercieel-GelijkDelen 4.0 Internationaal-licentie</a>.</p>
</div>
<div class="section level2">
<h2 id="project-organization">Project Organization<a class="anchor" aria-label="anchor" href="#project-organization"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>│   DESCRIPTION</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>│   grenswijzigingen.Rproj</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>│   LICENSE.md</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>│   NAMESPACE</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>│   README.md</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>│   README.Rmd                      <span class="ot">&lt;-</span> De top<span class="sc">-</span>level README voor ontwikkelaars die gebruik maken van het project.</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>│</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>├───data                            <span class="ot">&lt;-</span> Plek waar de omzetmatrices worden opgeslagen  </span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>│</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>├───data<span class="sc">-</span>raw</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>│   │   AdresDataOphalen.R</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>│   │   config_grenswijzigingen.R</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>│   │   maak_omzet_matrices.R</span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>│   │   main_maak_alle_matrices.R   <span class="ot">&lt;-</span> script om de omzetmatrices vanaf de bron opnieuw te maken</span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>│   │</span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>│   ├───external                    <span class="ot">&lt;-</span> de externe data kan hier worden opgeslagen</span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>│   │</span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>│   └───models</span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>│</span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a>├───man                             <span class="ot">&lt;-</span> help<span class="sc">-</span>bestanden</span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a>│</span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a>└───R</span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a>        data.R</span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a>        laad_omzet_matrices.R</span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a>        util_functies_grenswijzigingen.R</span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a>        vertaal_naar_peiljaar.R</span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a>        vertaal_naar_peiljaar_limSolve.R</span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a>        vertaal_postcode_naar_regio_op_peiljaar.R  <span class="ot">&lt;-</span> dit is de functie voor het omzetten van data op postcode niveau</span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a>        wrapper_vertaal_naar_peiljaar.R   <span class="ot">&lt;-</span> dit is de hoofdfunctie voor het omzetten van grenzen</span></code></pre></div>
<hr>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://creativecommons.org/licenses/by-nc-sa/4.0" class="external-link">CC BY-NC-SA 4.0</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing grenswijzigen</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Hans Weda <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-6675-2270" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hans Weda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
